\hypertarget{classutils_1_1_s_q_l}{}\section{utils.\+S\+QL Class Reference}
\label{classutils_1_1_s_q_l}\index{utils.SQL@{utils.SQL}}


A utility class containing some functions to assist in retrieving from a database.  


\subsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
typing.\+Tuple\mbox{[}object, object\mbox{]} \mbox{\hyperlink{classutils_1_1_s_q_l_aede5d687b4b358601a48b40aeaeb338f}{prepare\+DB}} (db\+\_\+settings, ssh\+\_\+settings)
\begin{DoxyCompactList}\small\item\em Function to set up a connection to a database, via an ssh tunnel if available. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{classutils_1_1_s_q_l_a4130ca2a1312987f2284f2ac1667b860}{connect\+To\+My\+S\+QL}} (\mbox{\hyperlink{classutils_1_1_s_q_l_login}{S\+Q\+L\+Login}} login)
\begin{DoxyCompactList}\small\item\em Function to help connect to a my\+S\+QL server. \end{DoxyCompactList}\item 
def \mbox{\hyperlink{classutils_1_1_s_q_l_ae60554dc510963a7dcc4bc544992f8d2}{connect\+To\+My\+S\+Q\+L\+Via\+S\+SH}} (\mbox{\hyperlink{classutils_1_1_s_q_l_login}{S\+Q\+L\+Login}} sql, \mbox{\hyperlink{classutils_1_1_s_s_h_login}{S\+S\+H\+Login}} ssh)
\begin{DoxyCompactList}\small\item\em Function to help connect to a my\+S\+QL server over S\+SH. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classutils_1_1_s_q_l_aa6065ddac43d833508d7e1964c430db7}\label{classutils_1_1_s_q_l_aa6065ddac43d833508d7e1964c430db7}} 
def {\bfseries disconnect\+My\+S\+Q\+L\+Via\+S\+SH} (tunnel, db)
\item 
typing.\+List\mbox{[}typing.\+Tuple\mbox{]} \mbox{\hyperlink{classutils_1_1_s_q_l_a43152b5f69fea05be945a40d5c5dbf6e}{S\+E\+L\+E\+CT}} (cursor, str db\+\_\+name, str table, typing.\+List\mbox{[}str\mbox{]} columns=None, str filter=None, int limit=-\/1, typing.\+List\mbox{[}str\mbox{]} sort\+\_\+columns=None, sort\+\_\+direction=\char`\"{}A\+SC\char`\"{}, str grouping=None, bool distinct=False, bool fetch\+\_\+results=True)
\begin{DoxyCompactList}\small\item\em Function to build and execute S\+E\+L\+E\+CT statements on a database connection. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{classutils_1_1_s_q_l_af152813f7d7923bad1ecb883177c5030}\label{classutils_1_1_s_q_l_af152813f7d7923bad1ecb883177c5030}} 
typing.\+List\mbox{[}typing.\+Tuple\mbox{]} {\bfseries Query} (cursor, str query, bool fetch\+\_\+results=True)
\item 
def \mbox{\hyperlink{classutils_1_1_s_q_l_aa45d1f8a1dc595e0156e3acda4310295}{server500\+Error}} (str err\+\_\+msg)
\begin{DoxyCompactList}\small\item\em Simple function to construct and log a nice server 500 error message. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsection*{Static Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{classutils_1_1_s_q_l_abfb0ac8f802c09a77409dbd1da9ea9fd}\label{classutils_1_1_s_q_l_abfb0ac8f802c09a77409dbd1da9ea9fd}} 
def {\bfseries \+\_\+prepare\+Select} (str db\+\_\+name, str table, typing.\+List\mbox{[}str\mbox{]} columns=None, str filter=None, int limit=-\/1, typing.\+List\mbox{[}str\mbox{]} sort\+\_\+columns=None, sort\+\_\+direction=\char`\"{}A\+SC\char`\"{}, str grouping=None, bool distinct=False)
\end{DoxyCompactItemize}


\subsection{Detailed Description}
A utility class containing some functions to assist in retrieving from a database. 

Specifically, helps to connect to a database, make selections, and provides a nicely formatted 500 error message. 

\subsection{Member Function Documentation}
\mbox{\Hypertarget{classutils_1_1_s_q_l_a4130ca2a1312987f2284f2ac1667b860}\label{classutils_1_1_s_q_l_a4130ca2a1312987f2284f2ac1667b860}} 
\index{utils.SQL@{utils.SQL}!connectToMySQL@{connectToMySQL}}
\index{connectToMySQL@{connectToMySQL}!utils.SQL@{utils.SQL}}
\subsubsection{\texorpdfstring{connectToMySQL()}{connectToMySQL()}}
{\footnotesize\ttfamily def utils.\+S\+Q\+L.\+connect\+To\+My\+S\+QL (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classutils_1_1_s_q_l_login}{S\+Q\+L\+Login}}}]{login }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Function to help connect to a my\+S\+QL server. 

Simply tries to make a connection, and prints an error in case of failure.


\begin{DoxyParams}{Parameters}
{\em host} & The name of the database host server. \\
\hline
{\em port} & The database server port to which we want to connect. \\
\hline
{\em user} & Username for connecting to the database. \\
\hline
{\em password} & The given user\textquotesingle{}s password. \\
\hline
{\em database} & The actual name of the database on the host. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An open connection to the database if successful, otherwise None. 
\end{DoxyReturn}
\mbox{\Hypertarget{classutils_1_1_s_q_l_ae60554dc510963a7dcc4bc544992f8d2}\label{classutils_1_1_s_q_l_ae60554dc510963a7dcc4bc544992f8d2}} 
\index{utils.SQL@{utils.SQL}!connectToMySQLViaSSH@{connectToMySQLViaSSH}}
\index{connectToMySQLViaSSH@{connectToMySQLViaSSH}!utils.SQL@{utils.SQL}}
\subsubsection{\texorpdfstring{connectToMySQLViaSSH()}{connectToMySQLViaSSH()}}
{\footnotesize\ttfamily def utils.\+S\+Q\+L.\+connect\+To\+My\+S\+Q\+L\+Via\+S\+SH (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classutils_1_1_s_q_l_login}{S\+Q\+L\+Login}}}]{sql,  }\item[{\mbox{\hyperlink{classutils_1_1_s_s_h_login}{S\+S\+H\+Login}}}]{ssh }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Function to help connect to a my\+S\+QL server over S\+SH. 

Simply tries to make a connection, and prints an error in case of failure.


\begin{DoxyParams}{Parameters}
{\em host} & The name of the database host server. \\
\hline
{\em port} & The database server port to which we want to connect. \\
\hline
{\em user} & Username for connecting to the database. \\
\hline
{\em password} & The given user\textquotesingle{}s password. \\
\hline
{\em database} & The actual name of the database on the host. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
An open connection to the database if successful, otherwise None. 
\end{DoxyReturn}
\mbox{\Hypertarget{classutils_1_1_s_q_l_aede5d687b4b358601a48b40aeaeb338f}\label{classutils_1_1_s_q_l_aede5d687b4b358601a48b40aeaeb338f}} 
\index{utils.SQL@{utils.SQL}!prepareDB@{prepareDB}}
\index{prepareDB@{prepareDB}!utils.SQL@{utils.SQL}}
\subsubsection{\texorpdfstring{prepareDB()}{prepareDB()}}
{\footnotesize\ttfamily  typing.\+Tuple\mbox{[}object, object\mbox{]} utils.\+S\+Q\+L.\+prepare\+DB (\begin{DoxyParamCaption}\item[{}]{db\+\_\+settings,  }\item[{}]{ssh\+\_\+settings }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Function to set up a connection to a database, via an ssh tunnel if available. 

\begin{DoxyReturn}{Returns}
A tuple consisting of the tunnel and database connection, respectively. 
\end{DoxyReturn}
\mbox{\Hypertarget{classutils_1_1_s_q_l_a43152b5f69fea05be945a40d5c5dbf6e}\label{classutils_1_1_s_q_l_a43152b5f69fea05be945a40d5c5dbf6e}} 
\index{utils.SQL@{utils.SQL}!SELECT@{SELECT}}
\index{SELECT@{SELECT}!utils.SQL@{utils.SQL}}
\subsubsection{\texorpdfstring{SELECT()}{SELECT()}}
{\footnotesize\ttfamily  typing.\+List\mbox{[}typing.\+Tuple\mbox{]} utils.\+S\+Q\+L.\+S\+E\+L\+E\+CT (\begin{DoxyParamCaption}\item[{}]{cursor,  }\item[{str}]{db\+\_\+name,  }\item[{str}]{table,  }\item[{typing.\+List\mbox{[}str\mbox{]} }]{columns = {\ttfamily None},  }\item[{str }]{filter = {\ttfamily None},  }\item[{int }]{limit = {\ttfamily -\/1},  }\item[{typing.\+List\mbox{[}str\mbox{]} }]{sort\+\_\+columns = {\ttfamily None},  }\item[{}]{sort\+\_\+direction = {\ttfamily \char`\"{}ASC\char`\"{}},  }\item[{str }]{grouping = {\ttfamily None},  }\item[{bool }]{distinct = {\ttfamily False},  }\item[{bool }]{fetch\+\_\+results = {\ttfamily True} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Function to build and execute S\+E\+L\+E\+CT statements on a database connection. 


\begin{DoxyParams}{Parameters}
{\em cursor} & A database cursor, retrieved from the active connection. \\
\hline
{\em db\+\_\+name} & The name of the database to which we are connected. \\
\hline
{\em table} & The name of the table from which we want to make a selection. \\
\hline
{\em columns} & A list of columns to be selected. If empty (or None), all columns will be used (S\+E\+L\+E\+CT $\ast$ F\+R\+OM ...). Default\+: None \\
\hline
{\em filter} & A string giving the constraints for a W\+H\+E\+RE clause. (The \char`\"{}\+W\+H\+E\+R\+E\char`\"{} term itself should not be part of the filter string) Default\+: None \\
\hline
{\em limit} & The maximum number of rows to be selected. Use -\/1 for no limit. Default\+: -\/1 \\
\hline
{\em sort\+\_\+columns} & A list of columns to sort results on. The order of columns in the list is the order given to \mbox{\hyperlink{classutils_1_1_s_q_l}{S\+QL}} Default\+: None \\
\hline
{\em sort\+\_\+direction} & The \char`\"{}direction\char`\"{} of sorting, either ascending or descending. Default\+: \char`\"{}\+A\+S\+C\char`\"{} \\
\hline
{\em grouping} & A column name to group results on. Subject to \mbox{\hyperlink{classutils_1_1_s_q_l}{S\+QL}} rules for grouping. Default\+: None \\
\hline
{\em distinct} & A bool to determine whether to select only rows with distinct values in the column. Default\+: False \\
\hline
{\em distinct} & A bool to determine whether all results should be fetched and returned. Default\+: True \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
A collection of all rows from the selection, if fetch\+\_\+results is true, otherwise None. 
\end{DoxyReturn}
\mbox{\Hypertarget{classutils_1_1_s_q_l_aa45d1f8a1dc595e0156e3acda4310295}\label{classutils_1_1_s_q_l_aa45d1f8a1dc595e0156e3acda4310295}} 
\index{utils.SQL@{utils.SQL}!server500Error@{server500Error}}
\index{server500Error@{server500Error}!utils.SQL@{utils.SQL}}
\subsubsection{\texorpdfstring{server500Error()}{server500Error()}}
{\footnotesize\ttfamily def utils.\+S\+Q\+L.\+server500\+Error (\begin{DoxyParamCaption}\item[{str}]{err\+\_\+msg }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Simple function to construct and log a nice server 500 error message. 


\begin{DoxyParams}{Parameters}
{\em err\+\_\+msg} & A more detailed error message with info to help debugging. \\
\hline
\end{DoxyParams}


The documentation for this class was generated from the following file\+:\begin{DoxyCompactItemize}
\item 
utils.\+py\end{DoxyCompactItemize}
